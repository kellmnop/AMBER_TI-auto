source /opt/crc/Modules/current/init/sh
WT=$1
MUT=$2
type=$3
bondlist=$(python <<EOF
ss = [b.split(':') for b in "$4".split()]
for pair in ss:
        print "bond %cond%.{}.SG %cond%.{}.SG".format(*pair)
EOF
)
Na=$5
Cl=$6

module load amber/18.0
tleap -f - <<_EOF
source leaprc.protein.ff14SB
source leaprc.water.spce
loadoff MAA.lib

WT = loadpdb $WT
$(echo "$bondlist" | sed "s/%cond%/wt/g")
savepdb wt PDBfiles/init_WT-$type.pdb

mut = loadpdb $MUT
$(echo "$bondlist" | sed "s/%cond%/mut/g" )
savepdb mut PDBfiles/init_$MUTname-$type.pdb

combo = combine {WT mut}
solvatebox combo SPCBOX 10.0 iso
addIonsRand combo Na+ $Na Cl- $Cl
savepdb combo PDBfiles/combo-WT_mut.pdb
saveAmberParm combo PRMTOPwat_$type.prmtop INPCRDwat_$type.inpcrd
quit
_EOF